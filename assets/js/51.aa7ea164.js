(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{426:function(s,a,t){"use strict";t.r(a);var n=t(5),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"npm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[s._v("#")]),s._v(" NPM")]),s._v(" "),t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),t("p",[t("code",[s._v("npm")]),s._v("有两层含义。一层含义是Node的开放式模块登记和管理系统，网址为"),t("a",{attrs:{href:"https://npmjs.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmjs.org"),t("OutboundLink")],1),s._v("。另一层含义是Node默认的模块管理器，是一个命令行下的软件，用来安装和管理Node模块。")]),s._v(" "),t("p",[t("code",[s._v("npm")]),s._v("不需要单独安装。在安装Node的时候，会连带一起安装"),t("code",[s._v("npm")]),s._v("。但是，Node附带的"),t("code",[s._v("npm")]),s._v("可能不是最新版本，最好用下面的命令，更新到最新版本。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" npm@latest -g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面的命令中，"),t("code",[s._v("@latest")]),s._v("表示最新版本，"),t("code",[s._v("-g")]),s._v("表示全局安装。所以，命令的主干是"),t("code",[s._v("npm install npm")]),s._v("，也就是使用"),t("code",[s._v("npm")]),s._v("安装自己。之所以可以这样，是因为"),t("code",[s._v("npm")]),s._v("本身与Node的其他模块没有区别。")]),s._v(" "),t("p",[s._v("然后，运行下面的命令，查看各种信息。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看 npm 命令列表")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看各个命令的简单用法")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -l\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看 npm 的版本")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 查看 npm 的配置")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config list -l\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"npm-init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-init"}},[s._v("#")]),s._v(" npm init")]),s._v(" "),t("p",[t("code",[s._v("npm init")]),s._v("用来初始化生成一个新的"),t("code",[s._v("package.json")]),s._v("文件。它会向用户提问一系列问题，如果你觉得不用修改默认配置，一路回车就可以了。")]),s._v(" "),t("p",[s._v("如果使用了"),t("code",[s._v("-f")]),s._v("（代表force）、"),t("code",[s._v("-y")]),s._v("（代表yes），则跳过提问阶段，直接生成一个新的"),t("code",[s._v("package.json")]),s._v("文件。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"npm-set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-set"}},[s._v("#")]),s._v(" npm set")]),s._v(" "),t("p",[t("code",[s._v("npm set")]),s._v("用来设置环境变量。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Your name'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-email "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Your email'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-author-url "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://yourdomain.com'")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init-license "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MIT'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("上面命令等于为"),t("code",[s._v("npm init")]),s._v("设置了默认值，以后执行"),t("code",[s._v("npm init")]),s._v("的时候，"),t("code",[s._v("package.json")]),s._v("的作者姓名、邮件、主页、许可证字段就会自动写入预设的值。这些信息会存放在用户主目录的"),t("code",[s._v("~/.npmrc")]),s._v("文件，使得用户不用每个项目都输入。如果某个项目有不同的设置，可以针对该项目运行"),t("code",[s._v("npm config")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" save-exact "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令设置加入模块时，"),t("code",[s._v("package.json")]),s._v("将记录模块的确切版本，而不是一个可选的版本范围。")]),s._v(" "),t("h2",{attrs:{id:"npm-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-config"}},[s._v("#")]),s._v(" npm config")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" prefix "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$dir")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面的命令将指定的"),t("code",[s._v("$dir")]),s._v("目录，设为模块的全局安装目录。如果当前有这个目录的写权限，那么运行"),t("code",[s._v("npm install")]),s._v("的时候，就不再需要"),t("code",[s._v("sudo")]),s._v("命令授权了。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" save-prefix ~\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面的命令使得"),t("code",[s._v("npm install --save")]),s._v("和"),t("code",[s._v("npm install --save-dev")]),s._v("安装新模块时，允许的版本范围从克拉符号（"),t("code",[s._v("^")]),s._v("）改成波浪号（"),t("code",[s._v("~")]),s._v("），即从允许小版本升级，变成只允许补丁包的升级。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init.author.name "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" init.author.email "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$email")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面命令指定使用"),t("code",[s._v("npm init")]),s._v("时，生成的"),t("code",[s._v("package.json")]),s._v("文件的字段默认值。")]),s._v(" "),t("h2",{attrs:{id:"npm-info"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-info"}},[s._v("#")]),s._v(" npm info")]),s._v(" "),t("p",[t("code",[s._v("npm info")]),s._v("命令可以查看每个模块的具体信息。比如，查看underscore模块的信息。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("$ npm info underscore\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'underscore'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  description"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'JavaScript\\'s functional programming helper library.'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  'dist-tags'"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" latest"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" '"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" '"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  repository"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'git'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'git"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//github.com/jashkenas/underscore.git' },")]),s._v("\n  homepage"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//underscorejs.org',")]),s._v("\n  main"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'underscore.js'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" '"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  devDependencies"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" phantomjs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" '"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.9")]),s._v("."),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("-1")]),s._v("' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  licenses"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'MIT'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//raw.github.com/jashkenas/underscore/master/LICENSE' },")]),s._v("\n  files"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" 'underscore.js'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     'underscore-min.js'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     'LICENSE' "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  readmeFilename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'README.md'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("上面命令返回一个JavaScript对象，包含了underscore模块的详细信息。这个对象的每个成员，都可以直接从info命令查询。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" info underscore description\nJavaScript's functional programming helper library.\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" info underscore homepage\nhttp://underscorejs.org\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" info underscore version\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(".2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"npm-search"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-search"}},[s._v("#")]),s._v(" npm search")]),s._v(" "),t("p",[t("code",[s._v("npm search")]),s._v("命令用于搜索npm仓库，它后面可以跟字符串，也可以跟正则表达式。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" search "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("搜索词"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("下面是一个例子。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" search node-gyp\n// NAME                  DESCRIPTION\n// autogypi              Autogypi handles dependencies "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" node-gyp projects.\n// grunt-node-gyp        Run node-gyp commands from Grunt.\n// gyp-io                Temporary solution to "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" node-gyp run "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("rebuild"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" under…\n// "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"npm-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-list"}},[s._v("#")]),s._v(" npm list")]),s._v(" "),t("p",[t("code",[s._v("npm list")]),s._v("命令以树型结构列出当前项目安装的所有模块，以及它们依赖的模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("加上global参数，会列出全局安装的模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list -global\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("npm list")]),s._v("命令也可以列出单个模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list underscore\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"npm-install"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-install"}},[s._v("#")]),s._v(" npm install")]),s._v(" "),t("h3",{attrs:{id:"基本用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[s._v("#")]),s._v(" 基本用法")]),s._v(" "),t("p",[s._v("Node模块采用"),t("code",[s._v("npm install")]),s._v("命令安装。")]),s._v(" "),t("p",[s._v("每个模块可以“全局安装”，也可以“本地安装”。“全局安装”指的是将一个模块安装到系统目录中，各个项目都可以调用。一般来说，全局安装只适用于工具模块，比如"),t("code",[s._v("eslint")]),s._v("和"),t("code",[s._v("gulp")]),s._v("。“本地安装”指的是将一个模块下载到当前项目的"),t("code",[s._v("node_modules")]),s._v("子目录，然后只有在项目目录之中，才能调用这个模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 本地安装")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 全局安装")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -global "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("code",[s._v("npm install")]),s._v("也支持直接输入Github代码库地址。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" git://github.com/package/path.git\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" git://github.com/package/path.git"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##0.1.0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("安装之前，"),t("code",[s._v("npm install")]),s._v("会先检查，"),t("code",[s._v("node_modules")]),s._v("目录之中是否已经存在指定模块。如果存在，就不再重新安装了，即使远程仓库已经有了一个新版本，也是如此。")]),s._v(" "),t("p",[s._v("如果你希望，一个模块不管是否安装过，npm 都要强制重新安装，可以使用"),t("code",[s._v("-f")]),s._v("或"),t("code",[s._v("--force")]),s._v("参数。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("packageName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --force\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果你希望，所有模块都要强制重新安装，那就删除"),t("code",[s._v("node_modules")]),s._v("目录，重新执行"),t("code",[s._v("npm install")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf node_modules\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"安装不同版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装不同版本"}},[s._v("#")]),s._v(" 安装不同版本")]),s._v(" "),t("p",[s._v("install命令总是安装模块的最新版本，如果要安装模块的特定版本，可以在模块名后面加上@和版本号。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sax@latest\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sax@0.1.1\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sax@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('">=0.1.0 <0.2.0"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如果使用"),t("code",[s._v("--save-exact")]),s._v("参数，会在package.json文件指定安装模块的确切版本。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" readable-stream --save --save-exact\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("install命令可以使用不同参数，指定所安装的模块属于哪一种性质的依赖关系，即出现在packages.json文件的哪一项中。")]),s._v(" "),t("ul",[t("li",[s._v("–save：模块名将被添加到dependencies，可以简化为参数"),t("code",[s._v("-S")]),s._v("。")]),s._v(" "),t("li",[s._v("–save-dev: 模块名将被添加到devDependencies，可以简化为参数"),t("code",[s._v("-D")]),s._v("。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sax --save\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" node-tap --save-dev\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 或者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sax -S\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" node-tap -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("如果要安装beta版本的模块，需要使用下面的命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装最新的beta版")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("@beta "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("latest beta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装指定的beta版")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("@1.3.1-beta.3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("code",[s._v("npm install")]),s._v("默认会安装"),t("code",[s._v("dependencies")]),s._v("字段和"),t("code",[s._v("devDependencies")]),s._v("字段中的所有模块，如果使用"),t("code",[s._v("--production")]),s._v("参数，可以只安装"),t("code",[s._v("dependencies")]),s._v("字段的模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --production\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 或者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_ENV")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("一旦安装了某个模块，就可以在代码中用"),t("code",[s._v("require")]),s._v("命令加载这个模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("var backbone "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backbone'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole.log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("backbone.VERSION"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"避免系统权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#避免系统权限"}},[s._v("#")]),s._v(" 避免系统权限")]),s._v(" "),t("p",[s._v("默认情况下，Npm全局模块都安装在系统目录（比如"),t("code",[s._v("/usr/local/lib/")]),s._v("），普通用户没有写入权限，需要用到"),t("code",[s._v("sudo")]),s._v("命令。这不是很方便，我们可以在没有root权限的情况下，安装全局模块。")]),s._v(" "),t("p",[s._v("首先，在主目录下新建配置文件"),t("code",[s._v(".npmrc")]),s._v("，然后在该文件中将"),t("code",[s._v("prefix")]),s._v("变量定义到主目录下面。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("prefix")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/home/yourUsername/npm")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后在主目录下新建"),t("code",[s._v("npm")]),s._v("子目录。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" ~/npm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此后，全局安装的模块都会安装在这个子目录中，npm也会到"),t("code",[s._v("~/npm/bin")]),s._v("目录去寻找命令。")]),s._v(" "),t("p",[s._v("最后，将这个路径在"),t("code",[s._v(".bash_profile")]),s._v("文件（或"),t("code",[s._v(".bashrc")]),s._v("文件）中加入PATH变量。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("PATH=~/npm/bin:$PATH")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"npm-update，npm-uninstall"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-update，npm-uninstall"}},[s._v("#")]),s._v(" npm update，npm uninstall")]),s._v(" "),t("p",[t("code",[s._v("npm update")]),s._v("命令可以更新本地安装的模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 升级当前项目的指定模块")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 升级全局安装的模块")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update -global "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("它会先到远程仓库查询最新版本，然后查询本地版本。如果本地版本不存在，或者远程版本较新，就会安装。")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("-S")]),s._v("或"),t("code",[s._v("--save")]),s._v("参数，可以在安装的时候更新"),t("code",[s._v("package.json")]),s._v("里面模块的版本号。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新之前的package.json")]),s._v("\ndependencies"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dep"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.1.1"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新之后的package.json")]),s._v("\ndependencies"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dep"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.2.2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("注意，从npm v2.6.1 开始，"),t("code",[s._v("npm update")]),s._v("只更新顶层模块，而不更新依赖的依赖，以前版本是递归更新的。如果想取到老版本的效果，要使用下面的命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" --depth "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v(" update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("npm uninstall")]),s._v("命令，卸载已安装的模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 卸载全局模块")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -global\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"npm-run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-run"}},[s._v("#")]),s._v(" npm run")]),s._v(" "),t("p",[t("code",[s._v("npm")]),s._v("不仅可以用于模块管理，还可以用于执行脚本。"),t("code",[s._v("package.json")]),s._v("文件有一个"),t("code",[s._v("scripts")]),s._v("字段，可以用于指定脚本命令，供"),t("code",[s._v("npm")]),s._v("直接调用。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myproject"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"jshint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browserify"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mocha"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint **.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mocha test/"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("上面代码中，"),t("code",[s._v("scripts")]),s._v("字段指定了两项命令"),t("code",[s._v("lint")]),s._v("和"),t("code",[s._v("test")]),s._v("。命令行输入"),t("code",[s._v("npm run-script lint")]),s._v("或者"),t("code",[s._v("npm run lint")]),s._v("，就会执行"),t("code",[s._v("jshint **.js")]),s._v("，输入"),t("code",[s._v("npm run-script test")]),s._v("或者"),t("code",[s._v("npm run test")]),s._v("，就会执行"),t("code",[s._v("mocha test/")]),s._v("。"),t("code",[s._v("npm run")]),s._v("是"),t("code",[s._v("npm run-script")]),s._v("的缩写，一般都使用前者，但是后者可以更好地反应这个命令的本质。")]),s._v(" "),t("p",[t("code",[s._v("npm run")]),s._v("命令会自动在环境变量"),t("code",[s._v("$PATH")]),s._v("添加"),t("code",[s._v("node_modules/.bin")]),s._v("目录，所以"),t("code",[s._v("scripts")]),s._v("字段里面调用命令时不用加上路径，这就避免了全局安装NPM模块。")]),s._v(" "),t("p",[t("code",[s._v("npm run")]),s._v("如果不加任何参数，直接运行，会列出"),t("code",[s._v("package.json")]),s._v("里面所有可以执行的脚本命令。")]),s._v(" "),t("p",[s._v("npm内置了两个命令简写，"),t("code",[s._v("npm test")]),s._v("等同于执行"),t("code",[s._v("npm run test")]),s._v("，"),t("code",[s._v("npm start")]),s._v("等同于执行"),t("code",[s._v("npm run start")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("npm run")]),s._v("会创建一个Shell，执行指定的命令，并临时将"),t("code",[s._v("node_modules/.bin")]),s._v("加入PATH变量，这意味着本地模块可以直接运行。")]),s._v(" "),t("p",[s._v("举例来说，你执行ESLint的安装命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i eslint --save-dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("运行上面的命令以后，会产生两个结果。首先，ESLint被安装到当前目录的"),t("code",[s._v("node_modules")]),s._v("子目录；其次，"),t("code",[s._v("node_modules/.bin")]),s._v("目录会生成一个符号链接"),t("code",[s._v("node_modules/.bin/eslint")]),s._v("，指向ESLint模块的可执行脚本。")]),s._v(" "),t("p",[s._v("然后，你就可以在"),t("code",[s._v("package.json")]),s._v("的"),t("code",[s._v("script")]),s._v("属性里面，不带路径的引用"),t("code",[s._v("eslint")]),s._v("这个脚本。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Test Project"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"eslint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.10.3"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint ."')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("等到运行"),t("code",[s._v("npm run lint")]),s._v("的时候，它会自动执行"),t("code",[s._v("./node_modules/.bin/eslint .")]),s._v("。")]),s._v(" "),t("p",[s._v("如果直接运行"),t("code",[s._v("npm run")]),s._v("不给出任何参数，就会列出"),t("code",[s._v("scripts")]),s._v("属性下所有命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run\nAvailable scripts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the user-service package:\n  lint\n     jshint **.js\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n    mocha test/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("下面是另一个"),t("code",[s._v("package.json")]),s._v("文件的例子。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watchify client/main.js -o public/app.js -v"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"browserify client/main.js -o public/app.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run watch & nodemon server.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node test/all.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("上面代码在"),t("code",[s._v("scripts")]),s._v("项，定义了四个别名，每个别名都有对应的脚本命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run start\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("其中，"),t("code",[s._v("start")]),s._v("和"),t("code",[s._v("test")]),s._v("属于特殊命令，可以省略"),t("code",[s._v("run")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" start\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果希望一个操作的输出，是另一个操作的输入，可以借用Linux系统的管道命令，将两个操作连在一起。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"build-js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"browserify browser/main.js | uglifyjs -mc > static/bundle.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("但是，更方便的写法是引用其他"),t("code",[s._v("npm run")]),s._v("命令。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm run build-js && npm run build-css"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面的写法是先运行"),t("code",[s._v("npm run build-js")]),s._v("，然后再运行"),t("code",[s._v("npm run build-css")]),s._v("，两个命令中间用"),t("code",[s._v("&&")]),s._v("连接。如果希望两个命令同时平行执行，它们中间可以用"),t("code",[s._v("&")]),s._v("连接。")]),s._v(" "),t("p",[s._v("下面是一个流操作的例子。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"autoprefixer"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cssmin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:css"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"autoprefixer -b 'last 2 versions' < assets/styles/main.css | cssmin > dist/main.css\"")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("写在"),t("code",[s._v("scripts")]),s._v("属性中的命令，也可以在"),t("code",[s._v("node_modules/.bin")]),s._v("目录中直接写成bash脚本。下面是一个bash脚本。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" site/main\nbrowserify browser/main.js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" uglifyjs -mc "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" static/bundle.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("假定上面的脚本文件名为build.sh，并且权限为可执行，就可以在scripts属性中引用该文件。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"build-js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"bin/build.sh"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),t("p",[t("code",[s._v("npm run")]),s._v("命令还可以添加参数。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mocha test/"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面代码指定"),t("code",[s._v("npm test")]),s._v("，实际运行"),t("code",[s._v("mocha test/")]),s._v("。如果要通过"),t("code",[s._v("npm test")]),s._v("命令，将参数传到mocha，则参数之前要加上两个连词线。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -- anothertest.js\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 等同于")]),s._v("\n$ mocha test/ anothertest.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面命令表示，mocha要运行所有"),t("code",[s._v("test")]),s._v("子目录的测试脚本，以及另外一个测试脚本"),t("code",[s._v("anothertest.js")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("npm run")]),s._v("本身有一个参数"),t("code",[s._v("-s")]),s._v("，表示关闭npm本身的输出，只输出脚本产生的结果。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("// 输出npm命令头\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n// 不输出npm命令头\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run -s "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"scripts脚本命令最佳实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scripts脚本命令最佳实践"}},[s._v("#")]),s._v(" scripts脚本命令最佳实践")]),s._v(" "),t("p",[t("code",[s._v("scripts")]),s._v("字段的脚本命令，有一些最佳实践，可以方便开发。首先，安装"),t("code",[s._v("npm-run-all")]),s._v("模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" npm-run-all --save-dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这个模块用于运行多个"),t("code",[s._v("scripts")]),s._v("脚本命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 继发执行")]),s._v("\n$ npm-run-all build:html build:js\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 等同于")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build:html "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build:js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 并行执行")]),s._v("\n$ npm-run-all --parallel watch:html watch:js\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 等同于")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run watch:html "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run watch:js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 混合执行")]),s._v("\n$ npm-run-all clean lint --parallel watch:html watch:js\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 等同于")]),s._v("\n$ npm-run-all clean lint\n$ npm-run-all --parallel watch:html watch:js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 通配符")]),s._v("\n$ npm-run-all --parallel watch:*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("（1）start脚本命令")]),s._v(" "),t("p",[t("code",[s._v("start")]),s._v("脚本命令，用于启动应用程序。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm-run-all --parallel dev serve"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令并行执行"),t("code",[s._v("dev")]),s._v("脚本命令和"),t("code",[s._v("serve")]),s._v("脚本命令，等同于下面的形式。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run serve\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果start脚本没有配置，"),t("code",[s._v("npm start")]),s._v("命令默认执行下面的脚本，前提是模块的根目录存在一个server.js文件。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ node server.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（2）dev脚本命令")]),s._v(" "),t("p",[t("code",[s._v("dev")]),s._v("脚本命令，规定开发阶段所要做的处理，比如构建网页资源。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm-run-all dev:*"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令用于继发执行所有"),t("code",[s._v("dev")]),s._v("的子命令。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"predev')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('sass": "node-sass --source-map src/css/hoodie.css.map --output-style nested src/sass/base.scss src/css/hoodie.css"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令将sass文件编译为css文件，并生成source map文件。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"dev')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('sass": "node-sass --source-map src/css/hoodie.css.map --watch --output-style nested src/sass/base.scss src/css/hoodie.css"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令会监视sass文件的变动，只要有变动，就自动将其编译为css文件。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"dev')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('autoprefix": "postcss --use autoprefixer --autoprefixer.browsers \\"> 5%\\" --output src/css/hoodie.css src/css/hoodie.css"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令为css文件加上浏览器前缀，限制条件是只考虑市场份额大于5%的浏览器。")]),s._v(" "),t("p",[s._v("（3）serve脚本命令")]),s._v(" "),t("p",[t("code",[s._v("serve")]),s._v("脚本命令用于启动服务。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"serve"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"live-server dist/ --port=9090"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令启动服务，用的是"),t("a",{attrs:{href:"https://npmjs.com/package/live-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("live-server"),t("OutboundLink")],1),s._v("模块，将服务启动在9090端口，展示"),t("code",[s._v("dist")]),s._v("子目录。")]),s._v(" "),t("p",[t("code",[s._v("live-server")]),s._v("模块有三个功能。")]),s._v(" "),t("ul",[t("li",[s._v("启动一个HTTP服务器，展示指定目录的"),t("code",[s._v("index.html")]),s._v("文件，通过该文件加载各种网络资源，这是"),t("code",[s._v("file://")]),s._v("协议做不到的。")]),s._v(" "),t("li",[s._v("添加自动刷新功能。只要指定目录之中，文件有任何变化，它就会刷新页面。")]),s._v(" "),t("li",[t("code",[s._v("npm run serve")]),s._v("命令执行以后，自动打开浏览器。、")])]),s._v(" "),t("p",[s._v("以前，上面三个功能需要三个模块来完成："),t("code",[s._v("http-server")]),s._v("、"),t("code",[s._v("live-reload")]),s._v("和"),t("code",[s._v("opener")]),s._v("，现在只要"),t("code",[s._v("live-server")]),s._v("一个模块就够了。")]),s._v(" "),t("p",[s._v("（4）test脚本命令")]),s._v(" "),t("p",[t("code",[s._v("test")]),s._v("脚本命令用于执行测试。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm-run-all test:*",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"test')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('lint": "sass-lint --verbose --config .sass-lint.yml src/sass/*"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面命令规定，执行测试时，运行"),t("code",[s._v("lint")]),s._v("脚本，检查脚本之中的语法错误。")]),s._v(" "),t("p",[s._v("（5）prod脚本命令")]),s._v(" "),t("p",[t("code",[s._v("prod")]),s._v("脚本命令，规定进入生产环境时需要做的处理。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"prod"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm-run-all prod:*",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"prod')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('sass": "node-sass --output-style compressed src/sass/base.scss src/css/prod/hoodie.min.css",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"prod')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('autoprefix": "postcss --use autoprefixer --autoprefixer.browsers "> 5%" --output src/css/prod/hoodie.min.css src/css/prod/hoodie.min.css"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面命令将sass文件转为css文件，并加上浏览器前缀。")]),s._v(" "),t("p",[s._v("（6）help脚本命令")]),s._v(" "),t("p",[t("code",[s._v("help")]),s._v("脚本命令用于展示帮助信息。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"help"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"markdown-chalk --input DEVELOPMENT.md"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令之中，"),t("code",[s._v("markdown-chalk")]),s._v("模块用于将指定的markdown文件，转为彩色文本显示在终端之中。")]),s._v(" "),t("p",[s._v("（7）docs脚本命令")]),s._v(" "),t("p",[t("code",[s._v("docs")]),s._v("脚本命令用于生成文档。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"docs"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"kss-node --source src/sass --homepage ../../styleguide.md"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令使用"),t("code",[s._v("kss-node")]),s._v("模块，提供源码的注释生成markdown格式的文档。")]),s._v(" "),t("h3",{attrs:{id:"pre-和-post-脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pre-和-post-脚本"}},[s._v("#")]),s._v(" pre- 和 post- 脚本")]),s._v(" "),t("p",[t("code",[s._v("npm run")]),s._v("为每条命令提供了"),t("code",[s._v("pre-")]),s._v("和"),t("code",[s._v("post-")]),s._v("两个钩子（hook）。以"),t("code",[s._v("npm run lint")]),s._v("为例，执行这条命令之前，npm会先查看有没有定义prelint和postlint两个钩子，如果有的话，就会先执行"),t("code",[s._v("npm run prelint")]),s._v("，然后执行"),t("code",[s._v("npm run lint")]),s._v("，最后执行"),t("code",[s._v("npm run postlint")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"myproject",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "devDependencies"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "eslint"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"latest"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "karma"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"latest"')]),s._v("\n  },\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "scripts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "lint"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"eslint --cache --ext .js --ext .jsx src",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"karma start --log-leve=error karma.config.js --single-run=true",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "pretest"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm run lint",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "posttest"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("\"echo 'Finished running tests'\"")]),s._v("\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("上面代码是一个"),t("code",[s._v("package.json")]),s._v("文件的例子。如果执行"),t("code",[s._v("npm test")]),s._v("，会按下面的顺序执行相应的命令。")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("pretest")])]),s._v(" "),t("li",[t("code",[s._v("test")])]),s._v(" "),t("li",[t("code",[s._v("posttest")])])]),s._v(" "),t("p",[s._v("如果执行过程出错，就不会执行排在后面的脚本，即如果prelint脚本执行出错，就不会接着执行lint和postlint脚本。")]),s._v(" "),t("p",[s._v("下面是一个例子。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"karma start",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "test')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('lint": "eslint . --ext .js --ext .jsx",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "pretest"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm run test:lint"')]),s._v("\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("上面代码中，在运行"),t("code",[s._v("npm run test")]),s._v("之前，会自动检查代码，即运行"),t("code",[s._v("npm run test:lint")]),s._v("命令。")]),s._v(" "),t("p",[s._v("下面是一些常见的"),t("code",[s._v("pre-")]),s._v("和"),t("code",[s._v("post-")]),s._v("脚本。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("prepublish")]),s._v("：发布一个模块前执行。")]),s._v(" "),t("li",[t("code",[s._v("postpublish")]),s._v("：发布一个模块后执行。")]),s._v(" "),t("li",[t("code",[s._v("preinstall")]),s._v("：用户执行"),t("code",[s._v("npm install")]),s._v("命令时，先执行该脚本。")]),s._v(" "),t("li",[t("code",[s._v("postinstall")]),s._v("：用户执行"),t("code",[s._v("npm install")]),s._v("命令时，安装结束后执行该脚本，通常用于将下载的源码编译成用户需要的格式，比如有些模块需要在用户机器上跟本地的C++模块一起编译。")]),s._v(" "),t("li",[t("code",[s._v("preuninstall")]),s._v("：卸载一个模块前执行。")]),s._v(" "),t("li",[t("code",[s._v("postuninstall")]),s._v("：卸载一个模块后执行。")]),s._v(" "),t("li",[t("code",[s._v("preversion")]),s._v("：更改模块版本前执行。")]),s._v(" "),t("li",[t("code",[s._v("postversion")]),s._v("：更改模块版本后执行。")]),s._v(" "),t("li",[t("code",[s._v("pretest")]),s._v("：运行"),t("code",[s._v("npm test")]),s._v("命令前执行。")]),s._v(" "),t("li",[t("code",[s._v("posttest")]),s._v("：运行"),t("code",[s._v("npm test")]),s._v("命令后执行。")]),s._v(" "),t("li",[t("code",[s._v("prestop")]),s._v("：运行"),t("code",[s._v("npm stop")]),s._v("命令前执行。")]),s._v(" "),t("li",[t("code",[s._v("poststop")]),s._v("：运行"),t("code",[s._v("npm stop")]),s._v("命令后执行。")]),s._v(" "),t("li",[t("code",[s._v("prestart")]),s._v("：运行"),t("code",[s._v("npm start")]),s._v("命令前执行。")]),s._v(" "),t("li",[t("code",[s._v("poststart")]),s._v("：运行"),t("code",[s._v("npm start")]),s._v("命令后执行。")]),s._v(" "),t("li",[t("code",[s._v("prerestart")]),s._v("：运行"),t("code",[s._v("npm restart")]),s._v("命令前执行。")]),s._v(" "),t("li",[t("code",[s._v("postrestart")]),s._v("：运行"),t("code",[s._v("npm restart")]),s._v("命令后执行。")])]),s._v(" "),t("p",[s._v("对于最后一个"),t("code",[s._v("npm restart")]),s._v("命令，如果没有设置"),t("code",[s._v("restart")]),s._v("脚本，"),t("code",[s._v("prerestart")]),s._v("和"),t("code",[s._v("postrestart")]),s._v("会依次执行stop和start脚本。")]),s._v(" "),t("p",[s._v("另外，不能在"),t("code",[s._v("pre")]),s._v("脚本之前再加"),t("code",[s._v("pre")]),s._v("，即"),t("code",[s._v("prepretest")]),s._v("脚本不起作用。")]),s._v(" "),t("p",[s._v("注意，即使Npm可以自动运行"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("脚本，也可以手动执行它们。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run prepublish\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("下面是"),t("code",[s._v("post install")]),s._v("的例子。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "postinstall"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"node lib/post_install.js"')]),s._v("\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面的这个命令，主要用于处理从Git仓库拉下来的源码。比如，有些源码是用TypeScript写的，可能需要转换一下。")]),s._v(" "),t("p",[s._v("下面是"),t("code",[s._v("publish")]),s._v("钩子的一个例子。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n  "dist:modules": "babel ./src --out-dir ./dist-modules",\n  "gh-pages": "webpack",\n  "gh-pages:deploy": "gh-pages -d gh-pages",\n  "prepublish": "npm run dist:modules",\n  "postpublish": "npm run gh-pages && npm run gh-pages:deploy"\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("上面命令在运行"),t("code",[s._v("npm run publish")]),s._v("时，会先执行Babel编译，然后调用Webpack构建，最后发到Github Pages上面。")]),s._v(" "),t("p",[s._v("以上都是npm相关操作的钩子，如果安装某些模块，还能支持Git相关的钩子。下面以"),t("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky"),t("OutboundLink")],1),s._v("模块为例。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" husky --save-dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("安装以后，就能在"),t("code",[s._v("package.json")]),s._v("添加"),t("code",[s._v("precommit")]),s._v("、"),t("code",[s._v("prepush")]),s._v("等钩子。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "scripts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "lint"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"eslint yourJsFiles.js",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "precommit"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm run test && npm run lint",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "prepush"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm run test && npm run lint",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "..."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"..."')]),s._v("\n    }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("类似作用的模块还有"),t("code",[s._v("pre-commit")]),s._v("、"),t("code",[s._v("precommit-hook")]),s._v("等。")]),s._v(" "),t("h3",{attrs:{id:"内部变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内部变量"}},[s._v("#")]),s._v(" 内部变量")]),s._v(" "),t("p",[s._v("scripts字段可以使用一些内部变量，主要是package.json的各种字段。")]),s._v(" "),t("p",[s._v("比如，package.json的内容是"),t("code",[s._v('{"name":"foo", "version":"1.2.5"}')]),s._v("，那么变量"),t("code",[s._v("npm_package_name")]),s._v("的值是foo，变量"),t("code",[s._v("npm_package_version")]),s._v("的值是1.2.5。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[s._v("{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "scripts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "bundle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"mkdir -p build/$npm_package_version/"')]),s._v("\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("运行"),t("code",[s._v("npm run bundle")]),s._v("以后，将会生成"),t("code",[s._v("build/1.2.5/")]),s._v("子目录。")]),s._v(" "),t("p",[t("code",[s._v("config")]),s._v("字段也可以用于设置内部字段。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"fooproject",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "config"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "reporter"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"xunit"')]),s._v("\n  },\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "scripts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"mocha test/ --reporter $npm_package_config_reporter"')]),s._v("\n  }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("上面代码中，变量"),t("code",[s._v("npm_package_config_reporter")]),s._v("对应的就是reporter。")]),s._v(" "),t("h3",{attrs:{id:"通配符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[s._v("#")]),s._v(" 通配符")]),s._v(" "),t("p",[s._v("npm的通配符的规则如下。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("*")]),s._v(" 匹配0个或多个字符")]),s._v(" "),t("li",[t("code",[s._v("?")]),s._v(" 匹配1个字符")]),s._v(" "),t("li",[t("code",[s._v("[...]")]),s._v(" 匹配某个范围的字符。如果该范围的第一个字符是"),t("code",[s._v("!")]),s._v("或"),t("code",[s._v("^")]),s._v("，则匹配不在该范围的字符。")]),s._v(" "),t("li",[t("code",[s._v("!(pattern|pattern|pattern)")]),s._v(" 匹配任何不符合给定的模式")]),s._v(" "),t("li",[t("code",[s._v("?(pattern|pattern|pattern)")]),s._v(" 匹配0个或1个给定的模式")]),s._v(" "),t("li",[t("code",[s._v("+(pattern|pattern|pattern)")]),s._v(" 匹配1个或多个给定的模式")]),s._v(" "),t("li",[t("code",[s._v("*(a|b|c)")]),s._v(" 匹配0个或多个给定的模式")]),s._v(" "),t("li",[t("code",[s._v("@(pattern|pat*|pat?erN)")]),s._v(" 只匹配给定模式之一")]),s._v(" "),t("li",[t("code",[s._v("**")]),s._v(" 如果出现在路径部分，表示0个或多个子目录。")])]),s._v(" "),t("h2",{attrs:{id:"npm-link"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-link"}},[s._v("#")]),s._v(" npm link")]),s._v(" "),t("p",[s._v("开发NPM模块的时候，有时我们会希望，边开发边试用，比如本地调试的时候，"),t("code",[s._v("require('myModule')")]),s._v("会自动加载本机开发中的模块。Node规定，使用一个模块时，需要将其安装到全局的或项目的"),t("code",[s._v("node_modules")]),s._v("目录之中。对于开发中的模块，解决方法就是在全局的"),t("code",[s._v("node_modules")]),s._v("目录之中，生成一个符号链接，指向模块的本地目录。")]),s._v(" "),t("p",[t("code",[s._v("npm link")]),s._v("就能起到这个作用，会自动建立这个符号链接。")]),s._v(" "),t("p",[s._v("请设想这样一个场景，你开发了一个模块"),t("code",[s._v("myModule")]),s._v("，目录为"),t("code",[s._v("src/myModule")]),s._v("，你自己的项目"),t("code",[s._v("myProject")]),s._v("要用到这个模块，项目目录为"),t("code",[s._v("src/myProject")]),s._v("。首先，在模块目录（"),t("code",[s._v("src/myModule")]),s._v("）下运行"),t("code",[s._v("npm link")]),s._v("命令。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("src/myModule$ npm link\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面的命令会在NPM的全局模块目录内，生成一个符号链接文件，该文件的名字就是"),t("code",[s._v("package.json")]),s._v("文件中指定的模块名。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("/path/to/global/node_modules/myModule -> src/myModule\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这个时候，已经可以全局调用"),t("code",[s._v("myModule")]),s._v("模块了。但是，如果我们要让这个模块安装在项目内，还要进行下面的步骤。")]),s._v(" "),t("p",[s._v("切换到项目目录，再次运行"),t("code",[s._v("npm link")]),s._v("命令，并指定模块名。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("src/myProject$ npm link myModule\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("上面命令等同于生成了本地模块的符号链接。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("src/myProject/node_modules/myModule -> /path/to/global/node_modules/myModule\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后，就可以在你的项目中，加载该模块了。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("var myModule = require('myModule');\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样一来，"),t("code",[s._v("myModule")]),s._v("的任何变化，都可以直接反映在"),t("code",[s._v("myProject")]),s._v("项目之中。但是，这样也出现了风险，任何在"),t("code",[s._v("myProject")]),s._v("目录中对"),t("code",[s._v("myModule")]),s._v("的修改，都会反映到模块的源码中。")]),s._v(" "),t("p",[s._v("如果你的项目不再需要该模块，可以在项目目录内使用"),t("code",[s._v("npm unlink")]),s._v("命令，删除符号链接。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("src/myProject$ npm unlink myModule\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"npm-bin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-bin"}},[s._v("#")]),s._v(" npm bin")]),s._v(" "),t("p",[t("code",[s._v("npm bin")]),s._v("命令显示相对于当前目录的，Node模块的可执行脚本所在的目录（即"),t("code",[s._v(".bin")]),s._v("目录）。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 项目根目录下执行")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" bin\n./node_modules/.bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"npm-adduser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-adduser"}},[s._v("#")]),s._v(" npm adduser")]),s._v(" "),t("p",[t("code",[s._v("npm adduser")]),s._v("用于在"),t("a",{attrs:{href:"http://npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmjs.com"),t("OutboundLink")],1),s._v("注册一个用户。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\nUsername: YOUR_USER_NAME\nPassword: YOUR_PASSWORD\nEmail: YOUR_EMAIL@domain.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"npm-publish"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-publish"}},[s._v("#")]),s._v(" npm publish")]),s._v(" "),t("p",[t("code",[s._v("npm publish")]),s._v("用于将当前模块发布到"),t("code",[s._v("npmjs.com")]),s._v("。执行之前，需要向"),t("code",[s._v("npmjs.com")]),s._v("申请用户名。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果已经注册过，就使用下面的命令登录。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("登录以后，就可以使用"),t("code",[s._v("npm publish")]),s._v("命令发布。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果当前模块是一个beta版，比如"),t("code",[s._v("1.3.1-beta.3")]),s._v("，那么发布的时候需要使用"),t("code",[s._v("tag")]),s._v("参数，将其发布到指定标签，默认的发布标签是"),t("code",[s._v("latest")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish --tag beta\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果发布私有模块，模块初始化的时候，需要加上"),t("code",[s._v("scope")]),s._v("参数。只有npm的付费用户才能发布私有模块。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init --scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("yourscope"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果你的模块是用ES6写的，那么发布的时候，最好转成ES5。首先，需要安装Babel。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev babel-cli@6 babel-preset-es2015@6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后，在"),t("code",[s._v("package.json")]),s._v("里面写入"),t("code",[s._v("build")]),s._v("脚本。")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"babel source --presets babel-preset-es2015 --out-dir distribution",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "prepublish"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"npm run build"')]),s._v("\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("运行上面的脚本，会将"),t("code",[s._v("source")]),s._v("目录里面的ES6源码文件，转为"),t("code",[s._v("distribution")]),s._v("目录里面的ES5源码文件。然后，在项目根目录下面创建两个文件"),t("code",[s._v(".npmignore")]),s._v("和"),t("code",[s._v(".gitignore")]),s._v("，分别写入以下内容。")]),s._v(" "),t("div",{staticClass:"language-javascrip line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// .npmignore\nsource\n\n// .gitignore\nnode_modules\ndistribution\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"npm-deprecate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-deprecate"}},[s._v("#")]),s._v(" npm deprecate")]),s._v(" "),t("p",[s._v("如果想废弃某个版本的模块，可以使用"),t("code",[s._v("npm deprecate")]),s._v("命令。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" deprecate my-thing@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"< 0.2.3"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"critical bug fixed in v0.2.3"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("运行上面的命令以后，小于"),t("code",[s._v("0.2.3")]),s._v("版本的模块的"),t("code",[s._v("package.json")]),s._v("都会写入一行警告，用户安装这些版本时，这行警告就会在命令行显示。")]),s._v(" "),t("h2",{attrs:{id:"npm-owner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-owner"}},[s._v("#")]),s._v(" npm owner")]),s._v(" "),t("p",[s._v("模块的维护者可以发布新版本。"),t("code",[s._v("npm owner")]),s._v("命令用于管理模块的维护者。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 列出指定模块的维护者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" owner "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 新增维护者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" owner "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 删除维护者")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" owner "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他命令"}},[s._v("#")]),s._v(" 其他命令")]),s._v(" "),t("h3",{attrs:{id:"npm-home，npm-repo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-home，npm-repo"}},[s._v("#")]),s._v(" npm home，npm repo")]),s._v(" "),t("p",[t("code",[s._v("npm home")]),s._v("命令可以打开一个模块的主页，"),t("code",[s._v("npm repo")]),s._v("命令则是打开一个模块的代码仓库。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" home "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$package")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" repo "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$package")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这两个命令不需要模块先安装。")]),s._v(" "),t("h3",{attrs:{id:"npm-outdated"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-outdated"}},[s._v("#")]),s._v(" npm outdated")]),s._v(" "),t("p",[t("code",[s._v("npm outdated")]),s._v("命令检查当前项目所依赖的模块，是否已经有新版本。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" outdated\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("它会输出当前版本（current version）、应当安装的版本（wanted version）和最新发布的版本（latest version）。")]),s._v(" "),t("h3",{attrs:{id:"npm-prune"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-prune"}},[s._v("#")]),s._v(" npm prune")]),s._v(" "),t("p",[t("code",[s._v("npm prune")]),s._v("检查当前项目的"),t("code",[s._v("node_modules")]),s._v("目录中，是否有"),t("code",[s._v("package.json")]),s._v("里面没有提到的模块，然后将所有这些模块输出在命令行。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" prune\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"npm-shrinkwrap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-shrinkwrap"}},[s._v("#")]),s._v(" npm shrinkwrap")]),s._v(" "),t("p",[t("code",[s._v("npm shrinkwrap")]),s._v("的作用是锁定当前项目的依赖模块的版本。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" shrinkwrap\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("运行该命令后，会在当前项目的根目录下生成一个"),t("code",[s._v("npm-shrinkwrap.json")]),s._v("文件，内容是"),t("code",[s._v("node_modules")]),s._v("目录下所有已经安装的模块，以及它们的精确版本。")]),s._v(" "),t("p",[s._v("下次运行"),t("code",[s._v("npm install")]),s._v("命令时，"),t("code",[s._v("npm")]),s._v("发现当前目录下有"),t("code",[s._v("npm-shrinkwrap.json")]),s._v("文件，就会只安装里面提到的模块，且版本也会保持一致。")])])}),[],!1,null,null,null);a.default=e.exports}}]);