(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{447:function(t,_,v){"use strict";v.r(_);var r=v(5),a=Object(r.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"_3-10-unsubscribe-取消订阅"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-unsubscribe-取消订阅"}},[t._v("#")]),t._v(" 3.10 UNSUBSCRIBE –取消订阅")]),t._v(" "),v("p",[t._v("客户端发送UNSUBSCRIBE报文给服务端，用于取消订阅主题。")]),t._v(" "),v("h3",{attrs:{id:"_3-10-1-固定报头"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-1-固定报头"}},[t._v("#")]),t._v(" 3.10.1 固定报头")]),t._v(" "),v("h5",{attrs:{id:"图例-3-28-unsubscribe报文固定报头"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#图例-3-28-unsubscribe报文固定报头"}},[t._v("#")]),t._v(" 图例 3.28 – UNSUBSCRIBE报文固定报头")]),t._v(" "),v("table",{staticStyle:{"text-align":"center"}},[v("tr",[v("td",{attrs:{align:"center"}},[v("strong",[t._v("Bit")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("7")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("6")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("5")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("4")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("3")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("2")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("1")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("0")])])]),t._v(" "),v("tr",[v("td",[t._v("byte 1")]),t._v(" "),v("td",{attrs:{colspan:"4",align:"center"}},[t._v("MQTT控制报文类型 (10)")]),t._v(" "),v("td",{attrs:{colspan:"4",align:"center"}},[t._v("保留位")])]),t._v(" "),v("tr",[v("td"),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("1")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("1")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("1")]),t._v(" "),v("td",{attrs:{align:"center"}},[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("byte 2")]),t._v(" "),v("td",{attrs:{colspan:"8",align:"center"}},[t._v("剩余长度")])])]),t._v(" "),v("p",[t._v("UNSUBSCRIBE报文固定报头的第3,2,1,0位是保留位且"),v("strong",[t._v("必须")]),t._v("分别设置为0,0,1,0。服务端"),v("strong",[t._v("必须")]),t._v("认为任何其它的值都是不合法的并关闭网络连接 [MQTT-3.10.1-1]。")]),t._v(" "),v("p",[v("strong",[t._v("剩余长度字段")])]),t._v(" "),v("p",[t._v("等于可变报头的长度加上有效载荷的长度。")]),t._v(" "),v("h3",{attrs:{id:"_3-10-2-可变报头"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-2-可变报头"}},[t._v("#")]),t._v(" 3.10.2 可变报头")]),t._v(" "),v("p",[t._v("可变报头包含一个报文标识符。2.3.1节提供了有关报文标识符的更多信息。")]),t._v(" "),v("h5",{attrs:{id:"图例-3-29-unsubscribe报文可变报头"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#图例-3-29-unsubscribe报文可变报头"}},[t._v("#")]),t._v(" 图例 3.29 – UNSUBSCRIBE报文可变报头")]),t._v(" "),v("table",{staticStyle:{"text-align":"center"}},[v("tr",[v("td",{attrs:{align:"center"}},[v("strong",[t._v("Bit")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("7")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("6")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("5")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("4")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("3")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("2")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("1")])]),t._v(" "),v("td",{attrs:{align:"center"}},[v("strong",[t._v("0")])])]),t._v(" "),v("tr",[v("td",[t._v("byte 1")]),t._v(" "),v("td",{attrs:{colspan:"8",align:"center"}},[t._v("报文标识符 MSB")])]),t._v(" "),v("tr",[v("td",[t._v("byte 2")]),t._v(" "),v("td",{attrs:{colspan:"8",align:"center"}},[t._v("报文标识符 LSB")])])]),t._v(" "),v("h3",{attrs:{id:"_3-10-3-有效载荷"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-3-有效载荷"}},[t._v("#")]),t._v(" 3.10.3 有效载荷")]),t._v(" "),v("p",[t._v("UNSUBSCRIBE报文的有效载荷包含客户端想要取消订阅的主题过滤器列表。UNSUBSCRIBE报文中的主题过滤器"),v("strong",[t._v("必须")]),t._v("是连续打包的、按照1.5.3节定义的UTF-8编码字符串 [MQTT-3.10.3-1]。")]),t._v(" "),v("p",[t._v("UNSUBSCRIBE报文的有效载荷"),v("strong",[t._v("必须")]),t._v("至少包含一个消息过滤器。没有有效载荷的UNSUBSCRIBE报文是违反协议的 [MQTT-3.10.3-2]。有关错误处理的更多信息请查看4.8节。")]),t._v(" "),v("h4",{attrs:{id:"有效载荷非规范示例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#有效载荷非规范示例"}},[t._v("#")]),t._v(" 有效载荷非规范示例")]),t._v(" "),v("blockquote",[v("p",[v("a",{attrs:{href:"#_Figure_3.30_-"}},[t._v("图例 3.30 -有效载荷字节格式非规范示例")]),t._v(" 展示了 "),v("a",{attrs:{href:"#_Table3.6_-_Payload"}},[t._v("表格 3.7 -有效载荷非规范示例")]),t._v(" 简要描述的UNSUBSCRIBE报文的有效载荷。")])]),t._v(" "),v("h5",{attrs:{id:"表格-3-7-有效载荷非规范示例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#表格-3-7-有效载荷非规范示例"}},[t._v("#")]),t._v(" 表格 3.7 -有效载荷非规范示例")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("主题过滤器")]),t._v(" "),v("th",[t._v("“a/b”")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("主题过滤器")]),t._v(" "),v("td",[t._v("“c/d”")])])])]),t._v(" "),v("h5",{attrs:{id:"图例-3-30-有效载荷字节格式非规范示例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#图例-3-30-有效载荷字节格式非规范示例"}},[t._v("#")]),t._v(" 图例 3.30 -有效载荷字节格式非规范示例")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th"),t._v(" "),v("th",[v("strong",[t._v("描述")])]),t._v(" "),v("th",[v("strong",[t._v("7")])]),t._v(" "),v("th",[v("strong",[t._v("6")])]),t._v(" "),v("th",[v("strong",[t._v("5")])]),t._v(" "),v("th",[v("strong",[t._v("4")])]),t._v(" "),v("th",[v("strong",[t._v("3")])]),t._v(" "),v("th",[v("strong",[t._v("2")])]),t._v(" "),v("th",[v("strong",[t._v("1")])]),t._v(" "),v("th",[v("strong",[t._v("0")])])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("主题过滤器")]),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("byte 1")]),t._v(" "),v("td",[t._v("Length MSB (0)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("byte 2")]),t._v(" "),v("td",[t._v("Length LSB (3)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")])]),t._v(" "),v("tr",[v("td",[t._v("byte 3")]),t._v(" "),v("td",[t._v("‘a’ (0x61)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")])]),t._v(" "),v("tr",[v("td",[t._v("byte 4")]),t._v(" "),v("td",[t._v("‘/’ (0x2F)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")])]),t._v(" "),v("tr",[v("td",[t._v("byte 5")]),t._v(" "),v("td",[t._v("‘b’ (0x62)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("主题过滤器")]),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("byte 6")]),t._v(" "),v("td",[t._v("Length MSB (0)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("byte 7")]),t._v(" "),v("td",[t._v("Length LSB (3)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")])]),t._v(" "),v("tr",[v("td",[t._v("byte 8")]),t._v(" "),v("td",[t._v("‘c’ (0x63)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")])]),t._v(" "),v("tr",[v("td",[t._v("byte 9")]),t._v(" "),v("td",[t._v("‘/’ (0x2F)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")])]),t._v(" "),v("tr",[v("td",[t._v("byte 10")]),t._v(" "),v("td",[t._v("‘d’ (0x64)")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("1")]),t._v(" "),v("td",[t._v("0")]),t._v(" "),v("td",[t._v("0")])])])]),t._v(" "),v("h3",{attrs:{id:"_3-10-4-响应"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-4-响应"}},[t._v("#")]),t._v(" 3.10.4 响应")]),t._v(" "),v("p",[t._v("UNSUBSCRIBE报文提供的主题过滤器（无论是否包含通配符）"),v("strong",[t._v("必须")]),t._v("与服务端持有的这个客户端的当前主题过滤器集合逐个字符比较。如果有任何过滤器完全匹配，那么它（服务端）自己的订阅将被删除，否则不会有进一步的处理 [MQTT-3.10.4-1]。")]),t._v(" "),v("p",[t._v("如果服务端删除了一个订阅：")]),t._v(" "),v("ul",[v("li",[t._v("它"),v("strong",[t._v("必须")]),t._v("停止分发任何新消息给这个客户端 [MQTT-3.10.4-2]。")]),t._v(" "),v("li",[t._v("它"),v("strong",[t._v("必须")]),t._v("完成分发任何已经开始往客户端发送的QoS 1和QoS 2的消息 [MQTT-3.10.4-3]。")]),t._v(" "),v("li",[t._v("它"),v("strong",[t._v("可以")]),t._v("继续发送任何现存的准备分发给客户端的缓存消息。")])]),t._v(" "),v("p",[t._v("服务端"),v("strong",[t._v("必须")]),t._v("发送UNSUBACK报文响应客户端的UNSUBSCRIBE请求。UNSUBACK报文"),v("strong",[t._v("必须")]),t._v("包含和UNSUBSCRIBE报文相同的报文标识符 [MQTT-3.10.4-4]。即使没有删除任何主题订阅，服务端也"),v("strong",[t._v("必须")]),t._v("发送一个UNSUBACK响应 [MQTT-3.10.4-5]。")]),t._v(" "),v("p",[t._v("如果服务端收到包含多个主题过滤器的UNSUBSCRIBE报文，它"),v("strong",[t._v("必须")]),t._v("如同收到了一系列的多个UNSUBSCRIBE报文一样处理那个报文，除了将它们的响应合并到一个单独的UNSUBACK报文外。 [MQTT-3.10.4-6]。")]),t._v(" "),v("h3",{attrs:{id:"第三章目录-mqtt控制报文"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#第三章目录-mqtt控制报文"}},[t._v("#")]),t._v(" 第三章目录 MQTT控制报文")]),t._v(" "),v("ul",[v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/03-ControlPackets.html"}},[t._v("3.0 Contents – MQTT控制报文")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0301-CONNECT.html"}},[t._v("3.1 CONNECT – 连接服务端")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0302-CONNACK.html"}},[t._v("3.2 CONNACK – 确认连接请求")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0303-PUBLISH.html"}},[t._v("3.3 PUBLISH – 发布消息")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0304-PUBACK.html"}},[t._v("3.4 PUBACK –发布确认")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0305-PUBREC.html"}},[t._v("3.5 PUBREC – 发布收到（QoS 2，第一步）")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0306-PUBREL.html"}},[t._v("3.6 PUBREL – 发布释放（QoS 2，第二步）")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0307-PUBCOMP.html"}},[t._v("3.7 PUBCOMP – 发布完成（QoS 2，第三步）")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0308-SUBSCRIBE.html"}},[t._v("3.8 SUBSCRIBE - 订阅主题")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0309-SUBACK.html"}},[t._v("3.9 SUBACK – 订阅确认")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0310-UNSUBSCRIBE.html"}},[t._v("3.10 UNSUBSCRIBE –取消订阅")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0311-UNSUBACK.html"}},[t._v("3.11 UNSUBACK – 取消订阅确认")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0312-PINGREQ.html"}},[t._v("3.12 PINGREQ – 心跳请求")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0313-PINGRESP.html"}},[t._v("3.13 PINGRESP – 心跳响应")])],1),t._v(" "),v("li",[v("RouterLink",{attrs:{to:"/views/mqtt/0314-DISCONNECT.html"}},[t._v("3.14 DISCONNECT –断开连接")])],1)]),t._v(" "),v("h3",{attrs:{id:"项目主页"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#项目主页"}},[t._v("#")]),t._v(" 项目主页")]),t._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"https://github.com/mcxiaoke/mqtt",target:"_blank",rel:"noopener noreferrer"}},[t._v("MQTT协议中文版"),v("OutboundLink")],1)])])])}),[],!1,null,null,null);_.default=a.exports}}]);