---
title: 为什么要用node.js
---

# 为什么要用node.js

搞了半天就是一个新瓶装旧酒的东西，看起来除了一个新鲜的可以使用JavaScript语法，node.js没什么长处，为什么要用它而不是同样可以在服务器端运行的Java或C##呢？这要从node.js事件驱动和非阻塞I/O的特色谈起。关于事件驱动熟悉JavaScript的同学应该很熟悉了，node.js采用一系列“非阻塞”库来支持事件循环的方式。本质上就是为文件系统、数据库之类的资源提供接口，比如一个数据库访问，采用事件机制,发起请求之后,立即将进程交出,当数据返回后触发事件,再继续处理数据。

在传统的阻塞I/O中其运行过程是这样的

```javascript
int num=query('select * from ......');

print(num);

...................//无关语句
```

print方法必须等待query方法返回结果，如果数据库出现网络连接故障，那么print方法就要等到超时才能执行，然后后面一些无关语句才能一次执行，而在非阻塞I/O中是这样的

```javascript
query('select * from...',callback(data){
  .............//相关语句
  print();
});

..............//无关语句
```

跟我们使用ajax，在回调函数中处理结果，但是不影响下面语句执行。 怪不得node.js要借用JavaScript来做此事，JavaScript的几个特性使它很胜任这项工作

1. 事件机制
2. 函数式编程，支持匿名函数，函数参数

Node.js中代码是单进程、单线程执行的（我们写的代码是，但node.js本身不是有兴趣同学可以看看[这个](http://rickgaribay.net/archive/2012/01/28/node-is-not-single-threaded.aspx)进一步了解），使用事件轮询机制和非阻塞I/O，在不新增额外线程的情况下对任务进行并行处理 。node.js解决了阻塞式编程浪费大量进程资源只是在等待,导致的大量内存和cpu的浪费问题，所以才敢宣称自己perfect for数据密集型的实时web 应用程序。